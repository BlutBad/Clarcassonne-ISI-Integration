<template name="hall_torneo">

{{#if show}}
  <div class="container_hall_tor"> 
    {{#with torneo}}              
      <div class="post-summary">
        <h1>{{title}}</h1>
        <img src="{{pic}}" alt="sample image" width="606" height="115" class="imgtor"/>
        <div class="post-detailss"> 
          Creado por <a href="">{{getUsername user_create}}</a> en <a href="#">Torneos</a> 
          <span class="badge badge-success">Empieza: {{date_start}}</span>
          <span class="badge badge-important">Termina: {{date_finish}}</span>
          <span class="{{participoClass}} apuntarme">Participantes: {{numParticip}}</span>      
        </div>
        
        <div class="post-description">
          <p>{{description_long}}</p>
        </div>       
        
      </div> 
    {{/with}}

      
    {{#if multiTorneo}} 
      <div class="container">

      <h2>Menu del torneo </h2>
        <div id="tab" class="btn-group" data="buttons-radio">
          {{#each multiMenuTorneo}} 
            <a href="" class="btn btn-large btn-info multiMenuTorneo {{multiMenuTorneoActive}}" data-toggle="tab">{{name}}</a>
          {{/each}}
        </div>
  
        {{#if showEtapasTorneo}}
              {{#if showIfAdmin}}
                  <button type="button" class="btn btn-labeled btn-success startTorneo">
                      Empezar el Torneo!
                  </button>

                    <button type="button" class="btn btn-labeled btn-warning simularEtapa">
                        Simular la etapa!
                    </button>

                  <button type="button" class="btn btn-labeled btn-info jugarEtapa">
                        Siguiente Etapa(Generar Partidas)
                  </button>

                  <button type="button" class="btn btn-labeled btn-danger finalizarTorneo">
                       Finalizar el torneo! 
                  </button>
                {{/if}}


            <h2>Etapas del torneo </h2>
            <div id="tab" class="btn-group" data="buttons-radio">
              {{#each etapasTorneo}} 
                <a href="" class="btn btn-large btn-info etapasTorneo {{etapasTorneoActive}}" data-toggle="tab">{{name}}</a>
              {{/each}}
            </div>
           
            {{#if showParticipantes}} 
              {{>participantes}}
            {{/if}}

            {{#if showEtapa}}
              {{>showEtapaTorneo}}
            {{/if}}
        {{/if}}

        {{#if showRankingTorneo}}
          <p>Este es el ranking del torneo loco!</p>
          {{>multiRanking}}
        {{/if}}


      </div>   
    {{/if}}

    {{#if soloTorneo}}
    
    {{#if finishTorneo}}
          <div class="container">   
            <div class="row">
              <div class="span5">
               <div class="well">
                <table class="table">                         
                    <h3>Los campeones del torneo!</h3>
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Nombre</th>
                      <th>Rango</th>
                      <th>Maxima Puntuacion</th>                                          
                    </tr>
                  </thead>   
                  <tbody>
                    {{#each soloRanking 3}}
                      <tr>
                        <td>{{no}}</td>
                        <td><span class="{{clacc}}">{{getUsername user_id}}</span>
                        <td>--</td>
                        <td>{{maxScore}}</td>                                       
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            </div>
          </div>    
          </div>  
      {{/if}}
    
      <div class="container">   
        <div class="row">
          <div class="span5">
           <div class="well">
            <table class="table">                         
                <h3>Ranking del torneo!</h3>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Nombre</th>
                  <th>Rango</th>
                  <th>Maxima Puntuacion</th>                                          
                </tr>
              </thead>   
              <tbody>
                {{#each soloRanking null}}
                  <tr>
                    <td>{{no}}</td>
                    <td><span class="{{clacc}}">{{getUsername user_id}}</span>
                    <td>--</td>
                    <td>{{maxScore}}</td>                                       
                  </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>    
      </div>                    
    {{/if}}

  </div>
{{/if}}
</template>


<template name="participantes">
    <div class="container">   
        <div class="row">
          <div class="span5">
           <div class="well">
            <table class="table">                         
                <h3>Participantes del torneo!</h3>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Nombre</th>
                  <th>Rango</th>
                  <th>Maxima Puntuacion</th>                                          
                </tr>
              </thead>   
              <tbody>
                 {{#each participantes}}
                  <tr>
                    <td>--</td>
                    <td><span class="{{clacc}}">{{getUsername this}}</span>
                    <td>--</td>
                    <td>--</td>                                       
                  </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>    
    </div> 
</template>


<template name="showInfoEtapaTorneo">
{{#if info}}
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Numero de participantes:</th>
        <th>Numero de partidas:</th>                                         
      </tr>
    </thead>   
    <tbody>
      <tr>
        <td>{{info.participantes}}</td>
        <td>{{info.partidas}}</td>                                    
      </tr>       
    </tbody>
  </table>
  {{/if}}
</template>

<template name="showEtapaTorneo">
        <div class="span5">
        
        {{>showInfoEtapaTorneo}}

          <table class="table table-striped table-condensed">
            <thead>
            <tr>
              <th>#</th>
              <th>Partida</th>
              <th>Ganador</th>                                        
            </tr>
            </thead>  
 
            <tbody>
              {{#each partidasEtapaTorneo}}
                <tr>
                  <td><span class="label label-success" id = "num">{{no}}</span></td>
                  <td>
                    <div class="span5">
                      <table class="table table-striped table-condensed">
                        <thead>
                          <tr>
                            <th>Username</th>
                            <th>Rango</th>
                            <th>Role</th>
                            <th>Status</th>                                          
                          </tr>
                        </thead>   
                        <tbody>
                          {{#each jugadores}}
                            <tr>
                              <td>{{getUsername this.user_id}}</td>
                              <td>{{userRango this.user_id}}</td>
                              <td>{{this.puntos}}</td>
                              <td><span class="{{estadoUser this.estado}}">{{this.estado}}</span></td>                                       
                            </tr>
                          {{/each}}           
                        </tbody>
                      </table>
                     </div>
                  </td>                    
                  <td><span class="label label-success" id = "winner">{{getUsername ganador.user_id}}</span></td>                                             
                </tr>
              {{/each}}
            </tbody>    
          </table>
        </div> 

</template>



<!--RANKIN !!! DIN DIN DIN -->


<template name="multiRanking">
<div class="container">   
  <div class="row">
      <div class="span5">
       <div class="well">
        <table class="table">                         
            <h3>Ranking del torneo!</h3>
          <thead>
            <tr>
              <th>#</th>
              <th>Nombre</th>
              <th>Rango</th>
              <th>Puntuacion Acumulada</th>                                          
            </tr>
          </thead>   
          <tbody>
            {{#each multiRanking}}
              <tr>
                <td>{{no}}</td>
                <td><span class="{{clacc}}">{{getUsername user_id}}</span>
                <td>--</td>
                <td>{{score}}</td>                                       
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>    
</div>  
</template>